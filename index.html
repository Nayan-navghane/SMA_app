<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <script>
            // Temporarily disabled for testing
            // if (localStorage.getItem('loggedIn') !== 'true') {
            //     window.location.href = 'login.html';
            // }
        </script>

        <nav class="sidebar">
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link" data-section="students"><i class="fas fa-user-graduate"></i> Students</a></li>
                <li><a href="#" class="nav-link" data-section="teachers"><i class="fas fa-chalkboard-teacher"></i> Teachers</a></li>
                <li><a href="#" class="nav-link" data-section="admissions"><i class="fas fa-door-open"></i> Admissions</a></li>
                <li><a href="#" class="nav-link" data-section="attendance"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                <li><a href="#" class="nav-link" data-section="schedule"><i class="fas fa-calendar-alt"></i> Schedule</a></li>
                <li><a href="#" class="nav-link" data-section="exams"><i class="fas fa-clipboard-list"></i> Exams</a></li>
                <li><a href="#" class="nav-link" data-section="fees"><i class="fas fa-money-bill-wave"></i> Fee Management</a></li>
                <li><a href="#" class="nav-link" data-section="reports"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="#" class="nav-link" data-section="salary"><i class="fas fa-money-bill-wave"></i> Salary</a></li>
                <li><a href="#" class="nav-link" data-section="staff"><i class="fas fa-users-cog"></i> Staff</a></li>
                <li><a href="#" class="nav-link" data-section="results"><i class="fas fa-chart-line"></i> Results</a></li>
                <li><a href="#" class="nav-link" data-section="timetable"><i class="fas fa-calendar-alt"></i> Time Table</a></li>
                <li><a href="#" class="nav-link" data-section="settings"><i class="fas fa-cog"></i> Settings</a></li>
                
                <!-- Logout removed from sidebar -->
            </ul>
        </nav>

        <div class="main-wrapper">
            <header class="top-header">
    <div class="header-left">
        <h1 class="school-title">School Management</h1>
        <h2 class="page-title">Student Management</h2>
        <button id="logoutBtn" style="float: right; padding: 5px 10px; background: #dc3545; color: white; border: none; cursor: pointer;">Logout</button>
    </div>
                <div class="header-right">
                    <div class="user-profile">
                        <i class="fas fa-user"></i>
                    </div>
                    <a href="#" class="logout-btn" onclick="schoolSystem.logout(); return false;">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </header>

            <main class="main-content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-users"></i></div>
                            <div class="stat-number" id="totalStudents">0</div>
                            <div class="stat-label">Total Students</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                            <div class="stat-number" id="totalTeachers">0</div>
                            <div class="stat-label">Total Teachers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-door-open"></i></div>
                            <div class="stat-number" id="pendingAdmissions">0</div>
                            <div class="stat-label">Pending Admissions</div>
                        </div>
                    </div>
                    <div class="content-grid">
                        <div class="recent-activities">
                            <h3>Recent Activities</h3>
                            <ul class="activity-list" id="recentActivities">
                                <li class="activity-item">No recent activities</li>
                            </ul>
                        </div>

                    </div>
                </div>

            <!-- Students Section -->
            <div id="students" class="section">
                <h2>Students Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddStudentForm()">Add Student</button>
                </div>
                <div class="filters">
                    <input type="text" id="studentSearch" placeholder="Search by name or roll no...">
                    <select id="classFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-container" id="addStudentFormContainer" style="display: none;">
                    <form id="studentForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="roll_no">Roll No</label>
                                <input type="text" id="roll_no" name="roll_no" required>
                            </div>
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="class">Class</label>
                                <select id="class" name="class" required>
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="section">Section</label>
                                <input type="text" id="section" name="section" placeholder="e.g., A, B">
                            </div>
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" id="dob" name="dob" required>
                            </div>
                            <div class="form-group">
                                <label for="photo">Photo</label>
                                <input type="file" id="photo" name="photo" accept="image/*">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="parent_name">Parent Name</label>
                                <input type="text" id="parent_name" name="parent_name" required>
                            </div>
                            <div class="form-group">
                                <label for="parent_contact">Parent Contact</label>
                                <input type="tel" id="parent_contact" name="parent_contact" required>
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea id="address" name="address" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="aadhar">Aadhar Number</label>
                                <input type="text" id="aadhar" name="aadhar" placeholder="12-digit Aadhar">
                            </div>
                            <div class="form-group">
                                <label for="blood_group">Blood Group</label>
                                <select id="blood_group" name="blood_group">
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="emergency_contact">Emergency Contact</label>
                                <input type="tel" id="emergency_contact" name="emergency_contact">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Student</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddStudentForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="studentsList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Class</th>
                                <th>Section</th>
                                <th>Parent Contact</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <tr>
                                <td colspan="6" class="no-data">No students found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Teachers Section -->
            <div id="teachers" class="section">
                <h2>Teachers Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddTeacherForm()">Add Teacher</button>
                </div>
                <div class="filters">
                    <input type="text" id="teacherSearch" placeholder="Search by name or subject...">
                    <select id="subjectFilter">
                        <option value="">All Subjects</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Physics">Physics</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Biology">Biology</option>
                        <option value="English">English</option>
                        <option value="Hindi">Hindi</option>
                        <option value="History">History</option>
                        <option value="Geography">Geography</option>
                        <option value="Computer Science">Computer Science</option>
                        <option value="Economics">Economics</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Art">Art</option>
                        <option value="Music">Music</option>
                        <option value="Physical Education">Physical Education</option>
                        <option value="Environmental Science">Environmental Science</option>
                    </select>
                </div>
                <div class="form-container" id="addTeacherFormContainer" style="display: none;">
                    <form id="teacherForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <select id="subject" name="subject" required>
                                    <option value="">Select Subject</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="contact">Contact</label>
                                <input type="tel" id="contact" name="contact" required>
                            </div>
                            <div class="form-group">
                                <label for="joining_date">Joining Date</label>
                                <input type="date" id="joining_date" name="joining_date" required>
                            </div>
                            <div class="form-group">
                                <label for="salary">Salary</label>
                                <input type="number" id="salary" name="salary" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="photo">Photo</label>
                                <input type="file" id="photo" name="photo" accept="image/*">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="experience">Experience (years)</label>
                                <input type="number" id="experience" name="experience" min="0">
                            </div>
                            <div class="form-group">
                                <label for="qualification">Qualification</label>
                                <input type="text" id="qualification" name="qualification">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Teacher</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddTeacherForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="teachersList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Subject</th>
                                <th>Contact</th>
                                <th>Joining Date</th>
                                <th>Salary</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="teachersTableBody">
                            <tr>
                                <td colspan="6" class="no-data">No teachers found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Staff Section -->
            <div id="staff" class="section">
                <h2>Staff Register</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddStaffForm()">Add New Staff</button>
                </div>
                <div class="filters">
                    <input type="text" id="staffSearch" placeholder="Search by name or role...">
                    <select id="departmentFilter">
                        <option value="">All Departments</option>
                        <option value="Administration">Administration</option>
                        <option value="Teaching">Teaching</option>
                        <option value="Support">Support</option>
                        <option value="Maintenance">Maintenance</option>
                    </select>
                    <select id="staffRoleFilter">
                        <option value="">All Roles</option>
                    </select>
                </div>
                <div class="form-container" id="addStaffFormContainer" style="display: none;">
                    <form id="staffForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffName">Full Name</label>
                                <input type="text" id="staffName" name="staffName" required>
                            </div>
                            <div class="form-group">
                                <label for="staffDepartment">Department</label>
                                <select id="staffDepartment" name="staffDepartment" required>
                                    <option value="">Select Department</option>
                                    <option value="Administration">Administration</option>
                                    <option value="Teaching">Teaching</option>
                                    <option value="Support">Support</option>
                                    <option value="Maintenance">Maintenance</option>
                                    <option value="Security">Security</option>
                                    <option value="Transport">Transport</option>
                                    <option value="Library">Library</option>
                                    <option value="Laboratory">Laboratory</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="staffRole">Role/Position</label>
                                <input type="text" id="staffRole" name="staffRole" required placeholder="e.g., Principal, Clerk, Security Guard">
                            </div>
                            <div class="form-group">
                                <label for="staffContact">Contact Number</label>
                                <input type="tel" id="staffContact" name="staffContact" required>
                            </div>
                            <div class="form-group">
                                <label for="staffEmail">Email Address</label>
                                <input type="email" id="staffEmail" name="staffEmail">
                            </div>
                            <div class="form-group">
                                <label for="staffSalary">Monthly Salary</label>
                                <input type="number" id="staffSalary" name="staffSalary" min="0" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffJoinDate">Joining Date</label>
                                <input type="date" id="staffJoinDate" name="staffJoinDate" required>
                            </div>
                            <div class="form-group">
                                <label for="staffAddress">Address</label>
                                <textarea id="staffAddress" name="staffAddress" rows="3" placeholder="Complete address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="staffQualification">Qualification</label>
                                <input type="text" id="staffQualification" name="staffQualification" placeholder="e.g., B.A., M.Sc., Diploma">
                            </div>
                            <div class="form-group">
                                <label for="staffExperience">Experience (years)</label>
                                <input type="number" id="staffExperience" name="staffExperience" min="0" placeholder="Years of experience">
                            </div>
                            <div class="form-group">
                                <label for="staffEmergencyContact">Emergency Contact</label>
                                <input type="tel" id="staffEmergencyContact" name="staffEmergencyContact">
                            </div>
                            <div class="form-group">
                                <label for="staffPhoto">Photo</label>
                                <input type="file" id="staffPhoto" name="staffPhoto" accept="image/*">
                                <div class="photo-preview" id="photoPreview" style="margin-top: 10px;">
                                    <img id="previewImg" src="" alt="Photo Preview" style="max-width: 150px; max-height: 150px; display: none; border: 1px solid #ddd; padding: 5px;">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffBloodGroup">Blood Group</label>
                                <select id="staffBloodGroup" name="staffBloodGroup">
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="staffAadhar">Aadhar Number</label>
                                <input type="text" id="staffAadhar" name="staffAadhar" placeholder="12-digit Aadhar number" maxlength="12" pattern="[0-9]{12}">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Staff Member</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddStaffForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="staffList">
                    <p>No staff records. Add your first staff member!</p>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" class="section">
                <h2>Student Results Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddResultForm()">Create New Result</button>
                    <button class="btn btn-secondary" onclick="schoolSystem.generateAllResults()">Generate All Results</button>
                </div>
                <div class="filters">
                    <input type="text" id="resultSearch" placeholder="Search by student name or roll no...">
                    <select id="resultClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="resultExamFilter">
                        <option value="">All Exams</option>
                        <option value="Unit Test">Unit Test</option>
                        <option value="Mid Term">Mid Term</option>
                        <option value="Final Exam">Final Exam</option>
                        <option value="Practice Test">Practice Test</option>
                    </select>
                </div>

                <!-- School Information Setup -->
                <div class="school-info-setup" id="schoolInfoSetup">
                    <h3>School Information Setup</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="schoolName">School Name</label>
                            <input type="text" id="schoolName" placeholder="Enter your school name">
                        </div>
                        <div class="form-group">
                            <label for="schoolLogo">School Logo</label>
                            <input type="file" id="schoolLogo" accept="image/*">
                            <div class="logo-preview" id="logoPreview" style="margin-top: 10px;">
                                <img id="logoImg" src="" alt="Logo Preview" style="max-width: 150px; max-height: 100px; display: none; border: 1px solid #ddd; padding: 5px;">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="schoolAddress">School Address</label>
                            <textarea id="schoolAddress" rows="2" placeholder="Enter school address"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="academicYear">Academic Year</label>
                            <select id="academicYear">
                                <option value="">Select Academic Year</option>
                                <option value="2024-25">2024-25</option>
                                <option value="2025-26">2025-26</option>
                                <option value="2026-27">2026-27</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="schoolSystem.saveSchoolInfo()">Save School Info</button>
                    </div>
                </div>

                <!-- Result Creation Form -->
                <div class="form-container" id="addResultFormContainer" style="display: none;">
                    <form id="resultForm">
                        <h3>Create Student Result</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="resultStudent">Student</label>
                                <select id="resultStudent" name="result_student" required onchange="schoolSystem.loadStudentForResult()">
                                    <option value="">Select Student</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="resultClass">Class</label>
                                <select id="resultClass" name="result_class" required>
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="examType">Exam Type</label>
                                <select id="examType" name="exam_type" required>
                                    <option value="">Select Exam Type</option>
                                    <option value="Unit Test">Unit Test</option>
                                    <option value="Mid Term">Mid Term</option>
                                    <option value="Final Exam">Final Exam</option>
                                    <option value="Practice Test">Practice Test</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="examDate">Exam Date</label>
                                <input type="date" id="examDate" name="exam_date" required>
                            </div>
                        </div>

                        <!-- Subject Marks Entry -->
                        <div class="marks-entry-section">
                            <h4>Enter Subject Marks</h4>
                            <div class="subjects-container" id="subjectsContainer">
                                <p class="no-data">Select a class to load subjects</p>
                            </div>
                        </div>

                        <!-- Grade Calculation -->
                        <div class="grade-calculation" id="gradeCalculation" style="display: none;">
                            <h4>Result Summary</h4>
                            <div class="result-summary" id="resultSummary">
                                <!-- Auto-calculated results will appear here -->
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Create Result</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.previewResult()">Preview Result</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddResultForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Results List -->
                <div id="resultsList">
                    <div class="results-display">
                        <p>No results created yet. Create your first result!</p>
                    </div>
                </div>
            </div>

            <!-- Time Table Section -->
            <div id="timetable" class="section">
                <h2>Exam Time Table Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddTimeTableForm()">Create Time Table</button>
                    <button class="btn btn-secondary" onclick="schoolSystem.generateTimeTable()">Generate Time Table</button>
                    <button class="btn btn-success" onclick="schoolSystem.printTimeTable()">Print Time Table</button>
                </div>
                <div class="filters">
                    <select id="timetableClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="timetableExamFilter">
                        <option value="">All Exams</option>
                        <option value="Unit Test">Unit Test</option>
                        <option value="Mid Term">Mid Term</option>
                        <option value="Final Exam">Final Exam</option>
                        <option value="Practice Test">Practice Test</option>
                    </select>
                    <input type="date" id="timetableDate" placeholder="Exam Date">
                </div>

                <!-- Time Table Information Setup -->
                <div class="timetable-info-setup" id="timetableInfoSetup">
                    <h3>Time Table Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="timetableTitle">Time Table Title</label>
                            <input type="text" id="timetableTitle" placeholder="e.g., Final Exam Time Table 2024">
                        </div>
                        <div class="form-group">
                            <label for="examSession">Exam Session</label>
                            <select id="examSession">
                                <option value="">Select Session</option>
                                <option value="Morning">Morning (9:00 AM - 12:00 PM)</option>
                                <option value="Afternoon">Afternoon (1:00 PM - 4:00 PM)</option>
                                <option value="Both">Both Sessions</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="instructions">Special Instructions</label>
                            <textarea id="instructions" rows="3" placeholder="Enter any special instructions for students..."></textarea>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" onclick="schoolSystem.saveTimeTableInfo()">Save Time Table Info</button>
                    </div>
                </div>

                <!-- Time Table Creation Form -->
                <div class="form-container" id="addTimeTableFormContainer" style="display: none;">
                    <form id="timetableForm">
                        <h3>Create Exam Time Table</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ttClass">Class</label>
                                <select id="ttClass" name="tt_class" required onchange="schoolSystem.loadSubjectsForTimeTable()">
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="ttExamDate">Exam Date</label>
                                <input type="date" id="ttExamDate" name="tt_exam_date" required>
                            </div>
                            <div class="form-group">
                                <label for="ttStartTime">Start Time</label>
                                <input type="time" id="ttStartTime" name="tt_start_time" required>
                            </div>
                            <div class="form-group">
                                <label for="ttEndTime">End Time</label>
                                <input type="time" id="ttEndTime" name="tt_end_time" required>
                            </div>
                        </div>

                        <!-- Subjects Selection for Time Table -->
                        <div class="timetable-subjects-section">
                            <h4>Select Subjects for Time Table</h4>
                            <div class="subjects-selection" id="subjectsSelection">
                                <p class="no-data">Select a class to load subjects</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add to Time Table</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.previewTimeTable()">Preview Time Table</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddTimeTableForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Time Table Display -->
                <div id="timetableDisplay">
                    <div class="timetable-container">
                        <div class="timetable-header">
                            <h3>Exam Time Table</h3>
                            <p id="timetableInfo">No time table created yet. Create your first time table!</p>
                        </div>
                        <div class="timetable-table" id="timetableTable">
                            <!-- Time table will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admissions Section -->
            <div id="admissions" class="section">
                <h2>New Admissions</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddAdmissionForm()">New Admission Application</button>
                </div>
                <div class="filters">
                    <input type="text" id="admissionSearch" placeholder="Search by name or application ID...">
                    <select id="admissionStatus">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <select id="admissionClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-container" id="addAdmissionFormContainer" style="display: none;">
                    <form id="admissionForm">
                        <!-- Student Information Section -->
                        <div class="form-section">
                            <h3>Student Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="first_name">First Name *</label>
                                    <input type="text" id="first_name" name="first_name" required>
                                </div>
                                <div class="form-group">
                                    <label for="last_name">Last Name *</label>
                                    <input type="text" id="last_name" name="last_name" required>
                                </div>
                                <div class="form-group">
                                    <label for="dob">Date of Birth *</label>
                                    <input type="date" id="dob" name="dob" required>
                                </div>
                                <div class="form-group">
                                    <label for="gender">Gender *</label>
                                    <select id="gender" name="gender" required>
                                        <option value="">Select Gender</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="nationality">Nationality</label>
                                    <input type="text" id="nationality" name="nationality" placeholder="e.g., Indian">
                                </div>
                                <div class="form-group">
                                    <label for="religion">Religion</label>
                                    <select id="religion" name="religion">
                                        <option value="">Select Religion</option>
                                        <option value="hindu">Hindu</option>
                                        <option value="muslim">Muslim</option>
                                        <option value="christian">Christian</option>
                                        <option value="sikh">Sikh</option>
                                        <option value="buddhist">Buddhist</option>
                                        <option value="jain">Jain</option>
                                        <option value="parsi">Parsi</option>
                                        <option value="jewish">Jewish</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Residential Address Section -->
                        <div class="form-section">
                            <h3>Residential Address</h3>
                            <div class="form-row">
                                <div class="form-group full-width">
                                    <label for="residential_address">Residential Address *</label>
                                    <textarea id="residential_address" name="residential_address" rows="3" required placeholder="Street address, Apartment/Unit, etc."></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="city">City *</label>
                                    <input type="text" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="state">State/Province</label>
                                    <input type="text" id="state" name="state" placeholder="e.g., Maharashtra">
                                </div>
                                <div class="form-group">
                                    <label for="zip_code">Zip/Postal Code</label>
                                    <input type="text" id="zip_code" name="zip_code" placeholder="e.g., 400001">
                                </div>
                            </div>
                        </div>

                        <!-- Academic Information Section -->
                        <div class="form-section">
                            <h3>Academic Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="applying_class">Applying for Class/Grade *</label>
                                    <select id="applying_class" name="applying_class" required>
                                        <option value="">Select Class</option>
                                        <option value="Nursery">Nursery</option>
                                        <option value="LKG">LKG</option>
                                        <option value="UKG">UKG</option>
                                        <option value="1">Class 1</option>
                                        <option value="2">Class 2</option>
                                        <option value="3">Class 3</option>
                                        <option value="4">Class 4</option>
                                        <option value="5">Class 5</option>
                                        <option value="6">Class 6</option>
                                        <option value="7">Class 7</option>
                                        <option value="8">Class 8</option>
                                        <option value="9">Class 9</option>
                                        <option value="10">Class 10</option>
                                        <option value="11">Class 11</option>
                                        <option value="12">Class 12</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="academic_year">Academic Year *</label>
                                    <select id="academic_year" name="academic_year" required>
                                        <option value="">Select Academic Year</option>
                                        <option value="2024-25">2024-25</option>
                                        <option value="2025-26">2025-26</option>
                                        <option value="2026-27">2026-27</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Previous School Information -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="previous_school">Name of Previous School (If applicable)</label>
                                    <input type="text" id="previous_school" name="previous_school" placeholder="Name of previous school">
                                </div>
                                <div class="form-group">
                                    <label for="previous_grade">Previous Grade/Class</label>
                                    <input type="text" id="previous_grade" name="previous_grade" placeholder="Grade/Class completed">
                                </div>
                            </div>
                        </div>

                        <!-- Subjects Interested In Section -->
                        <div class="form-section">
                            <h3>Subjects Interested In (Optional)</h3>
                            <div class="subjects-grid">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="mathematics"> Mathematics
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="science"> Science
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="english"> English
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="social_studies"> Social Studies
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="computer_science"> Computer Science
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="subjects[]" value="art"> Art
                                </label>
                            </div>
                        </div>

                        <!-- Parent/Guardian Information Section -->
                        <div class="form-section">
                            <h3>Parent/Guardian Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="father_name">Father's Full Name *</label>
                                    <input type="text" id="father_name" name="father_name" required>
                                </div>
                                <div class="form-group">
                                    <label for="mother_name">Mother's Full Name *</label>
                                    <input type="text" id="mother_name" name="mother_name" required>
                                </div>
                                <div class="form-group">
                                    <label for="father_phone">Father's Phone Number *</label>
                                    <input type="tel" id="father_phone" name="father_phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="mother_phone">Mother's Phone Number *</label>
                                    <input type="tel" id="mother_phone" name="mother_phone" required>
                                </div>
                                <div class="form-group">
                                    <label for="father_email">Father's Email</label>
                                    <input type="email" id="father_email" name="father_email">
                                </div>
                                <div class="form-group">
                                    <label for="mother_email">Mother's Email</label>
                                    <input type="email" id="mother_email" name="mother_email">
                                </div>
                                <div class="form-group">
                                    <label for="father_occupation">Father's Occupation</label>
                                    <input type="text" id="father_occupation" name="father_occupation">
                                </div>
                                <div class="form-group">
                                    <label for="mother_occupation">Mother's Occupation</label>
                                    <input type="text" id="mother_occupation" name="mother_occupation">
                                </div>
                                <div class="form-group">
                                    <label for="emergency_contact">Emergency Contact Number *</label>
                                    <input type="tel" id="emergency_contact" name="emergency_contact" required>
                                </div>
                                <div class="form-group">
                                    <label for="emergency_relationship">Relationship to Student</label>
                                    <input type="text" id="emergency_relationship" name="emergency_relationship" placeholder="e.g., Father, Mother, Guardian">
                                </div>
                            </div>
                        </div>

                        <!-- Medical Information Section -->
                        <div class="form-section">
                            <h3>Medical Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="blood_group">Blood Group</label>
                                    <select id="blood_group" name="blood_group">
                                        <option value="">Select Blood Group</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="allergies">Known Allergies</label>
                                    <input type="text" id="allergies" name="allergies" placeholder="List any known allergies">
                                </div>
                                <div class="form-group">
                                    <label for="medical_conditions">Medical Conditions/Chronic Illnesses</label>
                                    <textarea id="medical_conditions" name="medical_conditions" rows="2" placeholder="Please mention any medical conditions or chronic illnesses"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="current_medications">Current Medications</label>
                                    <input type="text" id="current_medications" name="current_medications" placeholder="List any current medications">
                                </div>
                                <div class="form-group">
                                    <label for="family_doctor">Family Doctor's Name</label>
                                    <input type="text" id="family_doctor" name="family_doctor">
                                </div>
                                <div class="form-group">
                                    <label for="doctor_phone">Doctor's Phone Number</label>
                                    <input type="tel" id="doctor_phone" name="doctor_phone">
                                </div>
                                <div class="form-group full-width">
                                    <label for="doctor_address">Doctor's Clinic Address</label>
                                    <textarea id="doctor_address" name="doctor_address" rows="2" placeholder="Doctor's clinic address"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Required Documents Section -->
                        <div class="form-section">
                            <h3>Required Documents</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="birth_certificate">Birth Certificate *</label>
                                    <input type="file" id="birth_certificate" name="birth_certificate" accept=".pdf,.jpg,.png" required>
                                    <small class="form-help">Accepted formats: PDF, JPG, PNG (Max size: 5MB)</small>
                                </div>
                                <div class="form-group">
                                    <label for="passport_photo">Recent Passport Size Photo *</label>
                                    <input type="file" id="passport_photo" name="passport_photo" accept=".jpg,.png" required>
                                    <small class="form-help">JPG, PNG format (Max size: 2MB)</small>
                                </div>
                                <div class="form-group">
                                    <label for="transfer_certificate">Transfer Certificate (If applicable)</label>
                                    <input type="file" id="transfer_certificate" name="transfer_certificate" accept=".pdf,.jpg,.png">
                                    <small class="form-help">From previous school (if applicable)</small>
                                </div>
                                <div class="form-group">
                                    <label for="marksheet">Previous Academic Marksheet/Report Card (If applicable)</label>
                                    <input type="file" id="marksheet" name="marksheet" accept=".pdf,.jpg,.png">
                                    <small class="form-help">Most recent academic performance</small>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Information Section -->
                        <div class="form-section">
                            <h3>Additional Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="special_needs">Special Educational Needs</label>
                                    <textarea id="special_needs" name="special_needs" rows="2" placeholder="Please mention any special educational needs or learning disabilities"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="extracurricular_interests">Extracurricular Interests</label>
                                    <input type="text" id="extracurricular_interests" name="extracurricular_interests" placeholder="Sports, arts, music, clubs, etc.">
                                </div>
                                <div class="form-group">
                                    <label for="achievements">Academic/Extracurricular Achievements</label>
                                    <textarea id="achievements" name="achievements" rows="2" placeholder="Awards, competitions, special recognition, etc."></textarea>
                                </div>
                                <div class="form-group full-width">
                                    <label for="additional_info">Additional Information</label>
                                    <textarea id="additional_info" name="additional_info" rows="3" placeholder="Any other information you'd like to share"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="referral_source">How did you hear about our school?</label>
                                    <select id="referral_source" name="referral_source">
                                        <option value="">Please select</option>
                                        <option value="website">School Website</option>
                                        <option value="advertisement">Advertisement</option>
                                        <option value="social_media">Social Media</option>
                                        <option value="word_of_mouth">Word of Mouth</option>
                                        <option value="current_student">Current Student</option>
                                        <option value="alumni">Alumni</option>
                                        <option value="education_fair">Education Fair</option>
                                        <option value="newspaper">Newspaper/Magazine</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Terms and Conditions -->
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="terms_accepted" required> I agree to the Terms and Conditions and Privacy Policy *
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="updates_subscribed"> I would like to receive updates about the admission process and school events
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Submit Application</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddAdmissionForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="admissionsList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Application ID</th>
                                <th>Student Name</th>
                                <th>Class</th>
                                <th>Parent Name</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="admissionsTableBody">
                            <tr>
                                <td colspan="7" class="no-data">No admissions found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attendance Section -->
            <div id="attendance" class="section">
                <h2>Attendance Management</h2>
                <div class="attendance-controls">
                    <button class="btn btn-primary" onclick="schoolSystem.showStudentAttendanceForm()">Mark Student Attendance</button>
                    <button class="btn btn-secondary" onclick="schoolSystem.showTeacherAttendanceForm()">Mark Teacher Attendance</button>
                    <button class="btn btn-success" onclick="schoolSystem.viewAttendanceReport()">View Attendance Report</button>
                </div>

                <!-- Student Attendance Form -->
                <div class="form-container" id="studentAttendanceFormContainer" style="display: none;">
                    <form id="studentAttendanceForm">
                        <h3>Mark Student Attendance</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="attendanceDate">Date</label>
                                <input type="date" id="attendanceDate" name="attendance_date" required>
                            </div>
                            <div class="form-group">
                                <label for="attendanceClass">Class</label>
                                <select id="attendanceClass" name="attendance_class" required onchange="schoolSystem.loadStudentsForAttendance()">
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="attendanceSection">Section</label>
                                <input type="text" id="attendanceSection" name="attendance_section" placeholder="e.g., A, B" onchange="schoolSystem.loadStudentsForAttendance()">
                            </div>
                        </div>
                        <div class="attendance-marking">
                            <h4>Mark Attendance</h4>
                            <div id="studentsAttendanceList">
                                <p class="no-data">Select class and section to load students</p>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Attendance</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideStudentAttendanceForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Teacher Attendance Form -->
                <div class="form-container" id="teacherAttendanceFormContainer" style="display: none;">
                    <form id="teacherAttendanceForm">
                        <h3>Mark Teacher Attendance</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="teacherAttendanceDate">Date</label>
                                <input type="date" id="teacherAttendanceDate" name="teacher_attendance_date" required>
                            </div>
                            <div class="form-group">
                                <label for="teacherAttendanceSubject">Subject (Optional)</label>
                                <select id="teacherAttendanceSubject" name="teacher_attendance_subject" onchange="schoolSystem.loadTeachersForAttendance()">
                                    <option value="">All Subjects</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                        </div>
                        <div class="attendance-marking">
                            <h4>Mark Teacher Attendance</h4>
                            <div id="teachersAttendanceList">
                                <p class="no-data">Loading teachers...</p>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Attendance</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideTeacherAttendanceForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Attendance Reports -->
                <div id="attendanceReportContainer" style="display: none;">
                    <h3>Attendance Reports</h3>
                    <div class="report-filters">
                        <select id="reportType">
                            <option value="student">Student Attendance</option>
                            <option value="teacher">Teacher Attendance</option>
                        </select>
                        <input type="date" id="reportStartDate" placeholder="Start Date">
                        <input type="date" id="reportEndDate" placeholder="End Date">
                        <select id="reportClassFilter">
                            <option value="">All Classes</option>
                            <option value="Nursery">Nursery</option>
                            <option value="LKG">LKG</option>
                            <option value="UKG">UKG</option>
                            <option value="1">Class 1</option>
                            <option value="2">Class 2</option>
                            <option value="3">Class 3</option>
                            <option value="4">Class 4</option>
                            <option value="5">Class 5</option>
                            <option value="6">Class 6</option>
                            <option value="7">Class 7</option>
                            <option value="8">Class 8</option>
                            <option value="9">Class 9</option>
                            <option value="10">Class 10</option>
                            <option value="11">Class 11</option>
                            <option value="12">Class 12</option>
                        </select>
                        <button class="btn btn-primary" onclick="schoolSystem.generateAttendanceReport()">Generate Report</button>
                    </div>
                    <div id="attendanceReportList">
                        <p>Select filters and generate report to view attendance data</p>
                    </div>
                </div>

                <!-- Default Attendance List -->
                <div id="attendanceList">
                    <div class="attendance-summary">
                        <div class="summary-card">
                            <h4>Today's Summary</h4>
                            <p id="todayStudentAttendance">Loading...</p>
                            <p id="todayTeacherAttendance">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Section -->
            <div id="schedule" class="section">
                <h2>Class Schedule Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddScheduleForm()">Add New Schedule</button>
                </div>
                <div class="filters">
                    <select id="scheduleClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="scheduleDayFilter">
                        <option value="">All Days</option>
                        <option value="monday">Monday</option>
                        <option value="tuesday">Tuesday</option>
                        <option value="wednesday">Wednesday</option>
                        <option value="thursday">Thursday</option>
                        <option value="friday">Friday</option>
                        <option value="saturday">Saturday</option>
                    </select>
                </div>
                <div class="form-container" id="addScheduleFormContainer" style="display: none;">
                    <form id="scheduleForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="scheduleClass">Class</label>
                                <select id="scheduleClass" name="scheduleClass" required>
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleDay">Day</label>
                                <select id="scheduleDay" required>
                                    <option value="">Select Day</option>
                                    <option value="monday">Monday</option>
                                    <option value="tuesday">Tuesday</option>
                                    <option value="wednesday">Wednesday</option>
                                    <option value="thursday">Thursday</option>
                                    <option value="friday">Friday</option>
                                    <option value="saturday">Saturday</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="schedulePeriod">Period</label>
                                <select id="schedulePeriod" required>
                                    <option value="">Select Period</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleSubject">Subject</label>
                                <select id="scheduleSubject" required>
                                    <option value="">Select Subject</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleTeacher">Teacher</label>
                                <select id="scheduleTeacher" required>
                                    <option value="">Select Teacher</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleTime">Time</label>
                                <input type="time" id="scheduleTime" required>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Schedule</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddScheduleForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="scheduleList">
                    <p>No schedule entries. Add your first schedule!</p>
                </div>
            </div>

            <!-- Exams Section -->
            <div id="exams" class="section">
                <h2>Paper Creation & Exam Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddPaperForm()">Create New Paper</button>
                </div>
                <div class="filters">
                    <input type="text" id="paperSearch" placeholder="Search by title or subject...">
                    <select id="paperClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="paperSubjectFilter">
                        <option value="">All Subjects</option>
                    </select>
                    <select id="paperTypeFilter" style="display: none;">
                        <option value="">All Types</option>
                    </select>
                </div>
                <div class="form-container" id="addPaperFormContainer" style="display: none;">
                    <form id="paperForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paperTitle">Paper Title</label>
                                <input type="text" id="paperTitle" name="paper_title" required>
                            </div>
                            <div class="form-group">
                                <label for="paperClass">Class</label>
                                <select id="paperClass" name="paper_class" required onchange="schoolSystem.loadSubjectsForPaper()">
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperSubject">Subject</label>
                                <select id="paperSubject" name="paper_subject" required>
                                    <option value="">Select Subject</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperType">Paper Type</label>
                                <select id="paperType" name="paper_type" required>
                                    <option value="">Select Paper Type</option>
                                    <option value="Unit Test">Unit Test</option>
                                    <option value="Mid Term">Mid Term Exam</option>
                                    <option value="Final Exam">Final Exam</option>
                                    <option value="Practice Test">Practice Test</option>
                                    <option value="Quiz">Quiz</option>
                                    <option value="Assignment">Assignment</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperDuration">Duration (minutes)</label>
                                <input type="number" id="paperDuration" name="paper_duration" min="30" value="60">
                            </div>
                            <div class="form-group">
                                <label for="paperTotalMarks">Total Marks</label>
                                <input type="number" id="paperTotalMarks" name="paper_total_marks" min="1" value="100">
                            </div>
                        </div>

                        <!-- Paper Content Editor -->
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="paperContent">Exam Paper Content</label>
                                <div class="editor-toolbar">
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('bold')"><i class="fas fa-bold"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('italic')"><i class="fas fa-italic"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('underline')"><i class="fas fa-underline"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addFormula()">Add Formula</button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addTable()">Add Table</button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addWatermark()">Add Watermark</button>
                                </div>
                                <textarea id="paperContent" name="paper_content" rows="15" placeholder="Enter your exam paper content here... You can use the toolbar above to format text, add formulas, tables, and watermarks."></textarea>
                            </div>
                        </div>

                        <!-- Question Builder -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quick Question Builder</label>
                                <button type="button" class="btn btn-secondary" onclick="schoolSystem.addQuickQuestion()">Add Question</button>
                                <div id="questionsContainer"></div>
                            </div>
                        </div>

                        <!-- Paper Settings -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="watermarkText">Watermark Text (Optional)</label>
                                <input type="text" id="watermarkText" name="watermark_text" placeholder="e.g., CONFIDENTIAL, DRAFT">
                            </div>
                            <div class="form-group">
                                <label for="instructions">Special Instructions</label>
                                <textarea id="instructions" name="instructions" rows="3" placeholder="Enter any special instructions for students..."></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Create Paper</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.previewPaper()">Preview Paper</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddPaperForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="examsList">
                    <p>No papers created yet. Create your first paper!</p>
                </div>
            </div>

            <!-- Fees Section -->
            <div id="fees" class="section">
                <h2>Fee Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddFeeRecordForm()">Add Fee Record</button>
                </div>
                <div class="filters">
                    <input type="text" id="feeSearch" placeholder="Search by name, roll no, or class...">
                    <select id="feeStatusFilter">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="paid">Paid</option>
                        <option value="partial">Partial</option>
                    </select>
                </div>
                <div class="form-container" id="addFeeRecordFormContainer" style="display: none;">
                    <form id="feeRecordForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="feeStudent">Student</label>
                                <select id="feeStudent" name="fee_student" required onchange="schoolSystem.loadStudentFeeHistory()">
                                    <option value="">Select Student</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeMonth">Month</label>
                                <select id="feeMonth" name="fee_month" required>
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeYear">Year</label>
                                <select id="feeYear" name="fee_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeAmount">Monthly Fee Amount</label>
                                <input type="number" id="feeAmount" name="fee_amount" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="feePaid">Amount Paid</label>
                                <input type="number" id="feePaid" name="fee_paid" min="0" step="0.01" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paymentDate">Payment Date</label>
                                <input type="date" id="paymentDate" name="payment_date" required>
                            </div>
                            <div class="form-group">
                                <label for="paymentMethod">Payment Method</label>
                                <select id="paymentMethod" name="payment_method" required>
                                    <option value="">Select Method</option>
                                    <option value="Cash">Cash</option>
                                    <option value="Online Transfer">Online Transfer</option>
                                    <option value="Cheque">Cheque</option>
                                    <option value="Card">Card</option>
                                    <option value="UPI">UPI</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lateFee">Late Fee (if any)</label>
                                <input type="number" id="lateFee" name="late_fee" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="discount">Discount (if any)</label>
                                <input type="number" id="discount" name="discount" min="0" step="0.01" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="feeNotes">Notes/Remarks</label>
                                <textarea id="feeNotes" name="fee_notes" rows="2" placeholder="Any additional notes about this payment..."></textarea>
                            </div>
                        </div>

                        <!-- Student Fee History -->
                        <div class="fee-history" id="studentFeeHistory" style="display: none;">
                            <h4>Fee Payment History</h4>
                            <div id="feeHistoryList">
                                <p>No fee history found for this student</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Fee Record</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddFeeRecordForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="feesList">
                    <p>No fee records found.</p>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="schoolSystem.downloadFeesReport()">Download Report</button>
                </div>
            </div>

            <!-- Salary Section -->
            <div id="salary" class="section">
                <h2>Salary Management</h2>

                <!-- Added Salary Management Buttons -->
                <div class="salary-management-buttons">
                    <div class="salary-btn-container">
                        <button class="btn btn-success salary-btn" onclick="schoolSystem.showPaySalaryForm()">
                            <i class="fas fa-money-bill-wave"></i>
                            <span>💰 Pay Salary</span>
                        </button>
                        <p>Allows you to select an employee and view their pending salaries, then mark them as paid</p>
                    </div>

                    <div class="salary-btn-container">
                        <button class="btn btn-info salary-btn" onclick="schoolSystem.showSalarySlipForm()">
                            <i class="fas fa-receipt"></i>
                            <span>🧾 Salary Paid Slip</span>
                        </button>
                        <p>Generate individual salary slips for paid salaries with detailed breakdowns</p>
                    </div>

                    <div class="salary-btn-container">
                        <button class="btn btn-primary salary-btn" onclick="schoolSystem.showSalarySheetForm()">
                            <i class="fas fa-list-alt"></i>
                            <span>📋 Salary Sheet</span>
                        </button>
                        <p>Display a comprehensive salary sheet with all records and totals</p>
                    </div>

                    <div class="salary-btn-container">
                        <button class="btn btn-secondary salary-btn" onclick="schoolSystem.showSalaryReport()">
                            <i class="fas fa-chart-bar"></i>
                            <span>📊 Salary Report</span>
                        </button>
                        <p>Enhanced the existing report functionality</p>
                    </div>
                </div>

                <!-- Existing Salary Actions -->
                <div class="salary-actions" style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddSalaryForm()">Add Salary</button>
                    <input type="file" id="excelUpload" accept=".xlsx,.xls" style="display: none;">
                    <button class="btn btn-warning" onclick="document.getElementById('excelUpload').click()">Upload Excel</button>
                </div>

                <!-- Add Salary Form -->
                <div class="form-container" id="addSalaryFormContainer" style="display: none;">
                    <form id="addSalaryForm">
                        <h3>Add New Salary Record</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="salaryEmployee">Employee</label>
                                <select id="salaryEmployee" name="salary_employee" required onchange="schoolSystem.loadEmployeeSalaryInfo()">
                                    <option value="">Select Employee</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="salaryMonth">Month</label>
                                <select id="salaryMonth" name="salary_month" required>
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="salaryYear">Year</label>
                                <select id="salaryYear" name="salary_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="baseSalary">Base Salary</label>
                                <input type="number" id="baseSalary" name="base_salary" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="allowance">Allowance</label>
                                <input type="number" id="allowance" name="allowance" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="deductions">Deductions</label>
                                <input type="number" id="deductions" name="deductions" min="0" step="0.01" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="overtime">Overtime Pay</label>
                                <input type="number" id="overtime" name="overtime" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="bonus">Bonus</label>
                                <input type="number" id="bonus" name="bonus" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="taxDeduction">Tax Deduction</label>
                                <input type="number" id="taxDeduction" name="tax_deduction" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="paymentDate">Payment Date</label>
                                <input type="date" id="paymentDate" name="payment_date" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="salaryNotes">Notes/Remarks</label>
                                <textarea id="salaryNotes" name="salary_notes" rows="2" placeholder="Any additional notes about this salary..."></textarea>
                            </div>
                        </div>
                        <div class="salary-calculation">
                            <div class="calculation-row">
                                <strong>Total Salary: ₹<span id="totalSalary">0.00</span></strong>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Salary Record</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddSalaryForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Pay Salary Form -->
                <div class="form-container" id="paySalaryFormContainer" style="display: none;">
                    <form id="paySalaryForm">
                        <h3>Process Salary Payment</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="payEmployee">Employee</label>
                                <select id="payEmployee" name="pay_employee" required onchange="schoolSystem.loadPendingSalaries()">
                                    <option value="">Select Employee</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paymentMethod">Payment Method</label>
                                <select id="paymentMethod" name="payment_method" required>
                                    <option value="">Select Method</option>
                                    <option value="Bank Transfer">Bank Transfer</option>
                                    <option value="Cash">Cash</option>
                                    <option value="Cheque">Cheque</option>
                                    <option value="UPI">UPI</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="transactionId">Transaction ID/Reference</label>
                                <input type="text" id="transactionId" name="transaction_id" placeholder="Transaction ID or Reference Number">
                            </div>
                        </div>
                        <div class="pending-salaries" id="pendingSalariesList">
                            <h4>Pending Salaries</h4>
                            <p>Select an employee to view pending salaries</p>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">Process Payment</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hidePaySalaryForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Salary Sheet Form -->
                <div class="form-container" id="salarySheetFormContainer" style="display: none;">
                    <form id="salarySheetForm">
                        <h3>Create Salary Sheet</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sheetMonth">Month</label>
                                <select id="sheetMonth" name="sheet_month" required>
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sheetYear">Year</label>
                                <select id="sheetYear" name="sheet_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="sheetDepartment">Department (Optional)</label>
                                <select id="sheetDepartment" name="sheet_department">
                                    <option value="">All Departments</option>
                                    <option value="Teaching">Teaching</option>
                                    <option value="Administration">Administration</option>
                                    <option value="Support">Support</option>
                                    <option value="Maintenance">Maintenance</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="includeProcessed" name="include_processed"> Include Already Processed
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="includePending" name="include_pending" checked> Include Pending
                                </label>
                            </div>
                        </div>
                        <div class="salary-sheet-preview" id="salarySheetPreview">
                            <h4>Salary Sheet Preview</h4>
                            <p>Select criteria to generate salary sheet preview</p>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="schoolSystem.generateSalarySheet()">Generate Sheet</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.downloadSalarySheet()">Download PDF</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideSalarySheetForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Salary Report Form -->
                <div class="form-container" id="salaryReportFormContainer" style="display: none;">
                    <form id="salaryReportForm">
                        <h3>Generate Salary Report</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="reportType">Report Type</label>
                                <select id="reportType" name="report_type" required>
                                    <option value="">Select Report Type</option>
                                    <option value="monthly">Monthly Report</option>
                                    <option value="yearly">Yearly Report</option>
                                    <option value="employee">Employee-wise Report</option>
                                    <option value="department">Department-wise Report</option>
                                    <option value="summary">Summary Report</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reportMonth">Month (For Monthly Reports)</label>
                                <select id="reportMonth" name="report_month">
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reportYear">Year</label>
                                <select id="reportYear" name="report_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="reportEmployee">Employee (For Employee Reports)</label>
                                <select id="reportEmployee" name="report_employee">
                                    <option value="">All Employees</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="reportDepartment">Department (For Department Reports)</label>
                                <select id="reportDepartment" name="report_department">
                                    <option value="">All Departments</option>
                                    <option value="Teaching">Teaching</option>
                                    <option value="Administration">Administration</option>
                                    <option value="Support">Support</option>
                                    <option value="Maintenance">Maintenance</option>
                                </select>
                            </div>
                        </div>
                        <div class="report-options">
                            <h4>Report Options</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="includeGraphs" name="include_graphs"> Include Charts/Graphs
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="includeSummary" name="include_summary" checked> Include Summary
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="includeDetails" name="include_details" checked> Include Detailed Breakdown
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="schoolSystem.generateSalaryReport()">Generate Report</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.downloadSalaryReport()">Download PDF</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideSalaryReportForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Salary Slip Form -->
                <div class="form-container" id="salarySlipFormContainer" style="display: none;">
                    <form id="salarySlipForm">
                        <h3>Generate Salary Slip</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="slipEmployee">Employee</label>
                                <select id="slipEmployee" name="slip_employee" required onchange="schoolSystem.loadPaidSalaries()">
                                    <option value="">Select Employee</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="slipRecord">Salary Record</label>
                                <select id="slipRecord" name="slip_record" required>
                                    <option value="">Select Paid Salary Record</option>
                                </select>
                            </div>
                        </div>
                        <div class="salary-slip-preview" id="salarySlipPreview">
                            <h4>Salary Slip Preview</h4>
                            <p>Select an employee and salary record to generate slip preview</p>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-primary" onclick="schoolSystem.generateSalarySlip()">Generate Slip</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.printSalarySlip()">Print Slip</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideSalarySlipForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Main Salary List -->
                <div id="salaryList">
                    <div class="salary-summary-cards">
                        <div class="summary-card">
                            <h4>Total Employees</h4>
                            <p id="totalEmployeesCount">0</p>
                        </div>
                        <div class="summary-card">
                            <h4>Pending Salaries</h4>
                            <p id="pendingSalariesCount">0</p>
                        </div>
                        <div class="summary-card">
                            <h4>This Month's Payroll</h4>
                            <p id="monthlyPayroll">₹0.00</p>
                        </div>
                    </div>
                    <div class="recent-salaries">
                        <h3>Recent Salary Records</h3>
                        <div id="recentSalariesTable">
                            <p>No salary records found. Add your first salary record!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports" class="section">
                <h2>Reports</h2>
                <div id="reportsList">
                    <p>Loading reports...</p>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="section">
                <h2>Settings</h2>
                <div class="form-container">
                    <form id="schoolInfoForm">
                        <h3>School Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="schoolName">School Name</label>
                                <input type="text" id="schoolName">
                            </div>
                            <div class="form-group">
                                <label for="schoolCode">School Code</label>
                                <input type="text" id="schoolCode">
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea id="address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone</label>
                                <input type="tel" id="phone">
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email">
                            </div>
                            <div class="form-group">
                                <label for="website">Website</label>
                                <input type="url" id="website">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save School Info</button>
                        </div>
                    </form>

                    <form id="systemPrefsForm">
                        <h3>System Preferences</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="theme">Theme</label>
                                <select id="theme">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="language">Language</label>
                                <select id="language">
                                    <option value="en">English</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="notifications"> Enable Notifications
                                </label>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Preferences</button>
                        </div>
                    </form>

                    <form id="securityForm">
                        <h3>Security Settings</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="sessionTimeout"> Enable Session Timeout
                            </label>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Security Settings</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Edit Modal -->
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="schoolSystem.closeModal()">&times;</span>
                    <h3 id="modalTitle">Edit Item</h3>
                    <form id="editForm">
                        <!-- Dynamic form fields -->
                    </form>
                </div>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('loggedIn');
            window.location.href = 'login.html';
        });
    </script>
</body>
</html>
