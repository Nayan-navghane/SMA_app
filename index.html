<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Management System</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <script>
            // Temporarily disabled for testing
            // if (localStorage.getItem('loggedIn') !== 'true') {
            //     window.location.href = 'login.html';
            // }
        </script>

        <nav class="sidebar">
            <ul class="nav-menu">
                <li><a href="#" class="nav-link active" data-section="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link" data-section="students"><i class="fas fa-user-graduate"></i> Students</a></li>
                <li><a href="#" class="nav-link" data-section="teachers"><i class="fas fa-chalkboard-teacher"></i> Teachers</a></li>
                <li><a href="#" class="nav-link" data-section="admissions"><i class="fas fa-door-open"></i> Admissions</a></li>
                <li><a href="#" class="nav-link" data-section="attendance"><i class="fas fa-calendar-check"></i> Attendance</a></li>
                <li><a href="#" class="nav-link" data-section="schedule"><i class="fas fa-calendar-alt"></i> Schedule</a></li>
                <li><a href="#" class="nav-link" data-section="exams"><i class="fas fa-clipboard-list"></i> Exams</a></li>
                <li><a href="#" class="nav-link" data-section="fees"><i class="fas fa-money-bill-wave"></i> Fee Management</a></li>
                <li><a href="#" class="nav-link" data-section="reports"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="#" class="nav-link" data-section="staff"><i class="fas fa-users-cog"></i> Staff</a></li>
                <li><a href="#" class="nav-link" data-section="settings"><i class="fas fa-cog"></i> Settings</a></li>
                
                <!-- Logout removed from sidebar -->
            </ul>
        </nav>

        <div class="main-wrapper">
            <header class="top-header">
    <div class="header-left">
        <h1 class="school-title">School Management</h1>
        <h2 class="page-title">Student Management</h2>
        <button id="logoutBtn" style="float: right; padding: 5px 10px; background: #dc3545; color: white; border: none; cursor: pointer;">Logout</button>
    </div>
                <div class="header-right">
                    <div class="user-profile">
                        <i class="fas fa-user"></i>
                    </div>
                    <a href="#" class="logout-btn" onclick="schoolSystem.logout(); return false;">
                        <i class="fas fa-sign-out-alt"></i>
                    </a>
                </div>
            </header>

            <main class="main-content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-users"></i></div>
                            <div class="stat-number" id="totalStudents">0</div>
                            <div class="stat-label">Total Students</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                            <div class="stat-number" id="totalTeachers">0</div>
                            <div class="stat-label">Total Teachers</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon"><i class="fas fa-door-open"></i></div>
                            <div class="stat-number" id="pendingAdmissions">0</div>
                            <div class="stat-label">Pending Admissions</div>
                        </div>
                    </div>
                    <div class="content-grid">
                        <div class="recent-activities">
                            <h3>Recent Activities</h3>
                            <ul class="activity-list" id="recentActivities">
                                <li class="activity-item">No recent activities</li>
                            </ul>
                        </div>
                        <div class="quick-actions">
                            <h3>Quick Actions</h3>
                            <button class="btn btn-primary" onclick="schoolSystem.showAddAdmissionForm()"><i class="fas fa-plus"></i> New Admission</button>
                            <button class="btn btn-secondary" onclick="schoolSystem.showAddStudentForm()"><i class="fas fa-plus"></i> Add Student</button>
                            <button class="btn btn-success" onclick="schoolSystem.showSection('attendance')"><i class="fas fa-check"></i> Mark Attendance</button>
                        </div>
                    </div>
                </div>

            <!-- Students Section -->
            <div id="students" class="section">
                <h2>Students Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddStudentForm()">Add Student</button>
                </div>
                <div class="filters">
                    <input type="text" id="studentSearch" placeholder="Search by name or roll no...">
                    <select id="classFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-container" id="addStudentFormContainer" style="display: none;">
                    <form id="studentForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="roll_no">Roll No</label>
                                <input type="text" id="roll_no" name="roll_no" required>
                            </div>
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="class">Class</label>
                                <select id="class" name="class" required>
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="section">Section</label>
                                <input type="text" id="section" name="section" placeholder="e.g., A, B">
                            </div>
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" id="dob" name="dob" required>
                            </div>
                            <div class="form-group">
                                <label for="photo">Photo</label>
                                <input type="file" id="photo" name="photo" accept="image/*">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="parent_name">Parent Name</label>
                                <input type="text" id="parent_name" name="parent_name" required>
                            </div>
                            <div class="form-group">
                                <label for="parent_contact">Parent Contact</label>
                                <input type="tel" id="parent_contact" name="parent_contact" required>
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea id="address" name="address" rows="3"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="aadhar">Aadhar Number</label>
                                <input type="text" id="aadhar" name="aadhar" placeholder="12-digit Aadhar">
                            </div>
                            <div class="form-group">
                                <label for="blood_group">Blood Group</label>
                                <select id="blood_group" name="blood_group">
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="emergency_contact">Emergency Contact</label>
                                <input type="tel" id="emergency_contact" name="emergency_contact">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Student</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddStudentForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="studentsList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Roll No</th>
                                <th>Name</th>
                                <th>Class</th>
                                <th>Section</th>
                                <th>Parent Contact</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                            <tr>
                                <td colspan="6" class="no-data">No students found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Teachers Section -->
            <div id="teachers" class="section">
                <h2>Teachers Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddTeacherForm()">Add Teacher</button>
                </div>
                <div class="filters">
                    <input type="text" id="teacherSearch" placeholder="Search by name or subject...">
                    <select id="subjectFilter">
                        <option value="">All Subjects</option>
                        <option value="Mathematics">Mathematics</option>
                        <option value="Physics">Physics</option>
                        <option value="Chemistry">Chemistry</option>
                        <option value="Biology">Biology</option>
                        <option value="English">English</option>
                        <option value="Hindi">Hindi</option>
                        <option value="History">History</option>
                        <option value="Geography">Geography</option>
                        <option value="Computer Science">Computer Science</option>
                        <option value="Economics">Economics</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Art">Art</option>
                        <option value="Music">Music</option>
                        <option value="Physical Education">Physical Education</option>
                        <option value="Environmental Science">Environmental Science</option>
                    </select>
                </div>
                <div class="form-container" id="addTeacherFormContainer" style="display: none;">
                    <form id="teacherForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="subject">Subject</label>
                                <select id="subject" name="subject" required>
                                    <option value="">Select Subject</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="contact">Contact</label>
                                <input type="tel" id="contact" name="contact" required>
                            </div>
                            <div class="form-group">
                                <label for="joining_date">Joining Date</label>
                                <input type="date" id="joining_date" name="joining_date" required>
                            </div>
                            <div class="form-group">
                                <label for="salary">Salary</label>
                                <input type="number" id="salary" name="salary" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="photo">Photo</label>
                                <input type="file" id="photo" name="photo" accept="image/*">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="experience">Experience (years)</label>
                                <input type="number" id="experience" name="experience" min="0">
                            </div>
                            <div class="form-group">
                                <label for="qualification">Qualification</label>
                                <input type="text" id="qualification" name="qualification">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Teacher</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddTeacherForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="teachersList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Subject</th>
                                <th>Contact</th>
                                <th>Joining Date</th>
                                <th>Salary</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="teachersTableBody">
                            <tr>
                                <td colspan="6" class="no-data">No teachers found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Staff Section -->
            <div id="staff" class="section">
                <h2>Staff Register</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddStaffForm()">Add New Staff</button>
                </div>
                <div class="filters">
                    <input type="text" id="staffSearch" placeholder="Search by name or role...">
                    <select id="departmentFilter">
                        <option value="">All Departments</option>
                        <option value="Administration">Administration</option>
                        <option value="Teaching">Teaching</option>
                        <option value="Support">Support</option>
                        <option value="Maintenance">Maintenance</option>
                    </select>
                    <select id="staffRoleFilter">
                        <option value="">All Roles</option>
                    </select>
                </div>
                <div class="form-container" id="addStaffFormContainer" style="display: none;">
                    <form id="staffForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffName">Full Name</label>
                                <input type="text" id="staffName" name="staffName" required>
                            </div>
                            <div class="form-group">
                                <label for="staffDepartment">Department</label>
                                <select id="staffDepartment" name="staffDepartment" required>
                                    <option value="">Select Department</option>
                                    <option value="Administration">Administration</option>
                                    <option value="Teaching">Teaching</option>
                                    <option value="Support">Support</option>
                                    <option value="Maintenance">Maintenance</option>
                                    <option value="Security">Security</option>
                                    <option value="Transport">Transport</option>
                                    <option value="Library">Library</option>
                                    <option value="Laboratory">Laboratory</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="staffRole">Role/Position</label>
                                <input type="text" id="staffRole" name="staffRole" required placeholder="e.g., Principal, Clerk, Security Guard">
                            </div>
                            <div class="form-group">
                                <label for="staffContact">Contact Number</label>
                                <input type="tel" id="staffContact" name="staffContact" required>
                            </div>
                            <div class="form-group">
                                <label for="staffEmail">Email Address</label>
                                <input type="email" id="staffEmail" name="staffEmail">
                            </div>
                            <div class="form-group">
                                <label for="staffSalary">Monthly Salary</label>
                                <input type="number" id="staffSalary" name="staffSalary" min="0" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffJoinDate">Joining Date</label>
                                <input type="date" id="staffJoinDate" name="staffJoinDate" required>
                            </div>
                            <div class="form-group">
                                <label for="staffAddress">Address</label>
                                <textarea id="staffAddress" name="staffAddress" rows="3" placeholder="Complete address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="staffQualification">Qualification</label>
                                <input type="text" id="staffQualification" name="staffQualification" placeholder="e.g., B.A., M.Sc., Diploma">
                            </div>
                            <div class="form-group">
                                <label for="staffExperience">Experience (years)</label>
                                <input type="number" id="staffExperience" name="staffExperience" min="0" placeholder="Years of experience">
                            </div>
                            <div class="form-group">
                                <label for="staffEmergencyContact">Emergency Contact</label>
                                <input type="tel" id="staffEmergencyContact" name="staffEmergencyContact">
                            </div>
                            <div class="form-group">
                                <label for="staffPhoto">Photo</label>
                                <input type="file" id="staffPhoto" name="staffPhoto" accept="image/*">
                                <div class="photo-preview" id="photoPreview" style="margin-top: 10px;">
                                    <img id="previewImg" src="" alt="Photo Preview" style="max-width: 150px; max-height: 150px; display: none; border: 1px solid #ddd; padding: 5px;">
                                </div>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="staffBloodGroup">Blood Group</label>
                                <select id="staffBloodGroup" name="staffBloodGroup">
                                    <option value="">Select Blood Group</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="staffAadhar">Aadhar Number</label>
                                <input type="text" id="staffAadhar" name="staffAadhar" placeholder="12-digit Aadhar number" maxlength="12" pattern="[0-9]{12}">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Staff Member</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddStaffForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="staffList">
                    <p>No staff records. Add your first staff member!</p>
                </div>
            </div>

            <!-- Admissions Section -->
            <div id="admissions" class="section">
                <h2>New Admissions</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddAdmissionForm()">New Admission Application</button>
                </div>
                <div class="filters">
                    <input type="text" id="admissionSearch" placeholder="Search by name or application ID...">
                    <select id="admissionStatus">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="approved">Approved</option>
                        <option value="rejected">Rejected</option>
                    </select>
                    <select id="admissionClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                </div>
                <div class="form-container" id="addAdmissionFormContainer" style="display: none;">
                    <form id="admissionForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="application_id">Application ID</label>
                                <input type="text" id="application_id" name="application_id" required>
                            </div>
                            <div class="form-group">
                                <label for="applicant_name">Student Name</label>
                                <input type="text" id="applicant_name" name="applicant_name" required>
                            </div>
                            <div class="form-group">
                                <label for="dob">Date of Birth</label>
                                <input type="date" id="dob" name="dob" required>
                            </div>
                            <div class="form-group">
                                <label for="applying_class">Applying For Class</label>
                                <select id="applying_class" name="applying_class" required>
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="parent_name">Parent/Guardian Name</label>
                                <input type="text" id="parent_name" name="parent_name" required>
                            </div>
                            <div class="form-group">
                                <label for="parent_contact">Parent Contact</label>
                                <input type="tel" id="parent_contact" name="parent_contact" required>
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea id="address" name="address" required></textarea>
                            </div>
                            <div class="form-group">
                                <label for="previous_school">Previous School</label>
                                <input type="text" id="previous_school" name="previous_school">
                            </div>
                            <div class="form-group">
                                <label for="documents_status">Documents Status</label>
                                <select id="documents_status" name="documents_status">
                                    <option value="pending">Pending</option>
                                    <option value="complete">Complete</option>
                                    <option value="incomplete">Incomplete</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Submit Application</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddAdmissionForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="admissionsList">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Application ID</th>
                                <th>Student Name</th>
                                <th>Class</th>
                                <th>Parent Name</th>
                                <th>Contact</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="admissionsTableBody">
                            <tr>
                                <td colspan="7" class="no-data">No admissions found</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Attendance Section -->
            <div id="attendance" class="section">
                <h2>Attendance Management</h2>
                <div class="attendance-controls">
                    <button class="btn btn-primary" onclick="schoolSystem.showStudentAttendanceForm()">Mark Student Attendance</button>
                    <button class="btn btn-secondary" onclick="schoolSystem.showTeacherAttendanceForm()">Mark Teacher Attendance</button>
                    <button class="btn btn-success" onclick="schoolSystem.viewAttendanceReport()">View Attendance Report</button>
                </div>

                <!-- Student Attendance Form -->
                <div class="form-container" id="studentAttendanceFormContainer" style="display: none;">
                    <form id="studentAttendanceForm">
                        <h3>Mark Student Attendance</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="attendanceDate">Date</label>
                                <input type="date" id="attendanceDate" name="attendance_date" required>
                            </div>
                            <div class="form-group">
                                <label for="attendanceClass">Class</label>
                                <select id="attendanceClass" name="attendance_class" required onchange="schoolSystem.loadStudentsForAttendance()">
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="attendanceSection">Section</label>
                                <input type="text" id="attendanceSection" name="attendance_section" placeholder="e.g., A, B" onchange="schoolSystem.loadStudentsForAttendance()">
                            </div>
                        </div>
                        <div class="attendance-marking">
                            <h4>Mark Attendance</h4>
                            <div id="studentsAttendanceList">
                                <p class="no-data">Select class and section to load students</p>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Attendance</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideStudentAttendanceForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Teacher Attendance Form -->
                <div class="form-container" id="teacherAttendanceFormContainer" style="display: none;">
                    <form id="teacherAttendanceForm">
                        <h3>Mark Teacher Attendance</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="teacherAttendanceDate">Date</label>
                                <input type="date" id="teacherAttendanceDate" name="teacher_attendance_date" required>
                            </div>
                            <div class="form-group">
                                <label for="teacherAttendanceSubject">Subject (Optional)</label>
                                <select id="teacherAttendanceSubject" name="teacher_attendance_subject" onchange="schoolSystem.loadTeachersForAttendance()">
                                    <option value="">All Subjects</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                        </div>
                        <div class="attendance-marking">
                            <h4>Mark Teacher Attendance</h4>
                            <div id="teachersAttendanceList">
                                <p class="no-data">Loading teachers...</p>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Attendance</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideTeacherAttendanceForm()">Cancel</button>
                        </div>
                    </form>
                </div>

                <!-- Attendance Reports -->
                <div id="attendanceReportContainer" style="display: none;">
                    <h3>Attendance Reports</h3>
                    <div class="report-filters">
                        <select id="reportType">
                            <option value="student">Student Attendance</option>
                            <option value="teacher">Teacher Attendance</option>
                        </select>
                        <input type="date" id="reportStartDate" placeholder="Start Date">
                        <input type="date" id="reportEndDate" placeholder="End Date">
                        <select id="reportClassFilter">
                            <option value="">All Classes</option>
                            <option value="Nursery">Nursery</option>
                            <option value="LKG">LKG</option>
                            <option value="UKG">UKG</option>
                            <option value="1">Class 1</option>
                            <option value="2">Class 2</option>
                            <option value="3">Class 3</option>
                            <option value="4">Class 4</option>
                            <option value="5">Class 5</option>
                            <option value="6">Class 6</option>
                            <option value="7">Class 7</option>
                            <option value="8">Class 8</option>
                            <option value="9">Class 9</option>
                            <option value="10">Class 10</option>
                            <option value="11">Class 11</option>
                            <option value="12">Class 12</option>
                        </select>
                        <button class="btn btn-primary" onclick="schoolSystem.generateAttendanceReport()">Generate Report</button>
                    </div>
                    <div id="attendanceReportList">
                        <p>Select filters and generate report to view attendance data</p>
                    </div>
                </div>

                <!-- Default Attendance List -->
                <div id="attendanceList">
                    <div class="attendance-summary">
                        <div class="summary-card">
                            <h4>Today's Summary</h4>
                            <p id="todayStudentAttendance">Loading...</p>
                            <p id="todayTeacherAttendance">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule Section -->
            <div id="schedule" class="section">
                <h2>Class Schedule Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddScheduleForm()">Add New Schedule</button>
                </div>
                <div class="filters">
                    <select id="scheduleClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="scheduleDayFilter">
                        <option value="">All Days</option>
                        <option value="monday">Monday</option>
                        <option value="tuesday">Tuesday</option>
                        <option value="wednesday">Wednesday</option>
                        <option value="thursday">Thursday</option>
                        <option value="friday">Friday</option>
                        <option value="saturday">Saturday</option>
                    </select>
                </div>
                <div class="form-container" id="addScheduleFormContainer" style="display: none;">
                    <form id="scheduleForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="scheduleClass">Class</label>
                                <select id="scheduleClass" required>
                                    <option value="">Select Class</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleDay">Day</label>
                                <select id="scheduleDay" required>
                                    <option value="">Select Day</option>
                                    <option value="monday">Monday</option>
                                    <option value="tuesday">Tuesday</option>
                                    <option value="wednesday">Wednesday</option>
                                    <option value="thursday">Thursday</option>
                                    <option value="friday">Friday</option>
                                    <option value="saturday">Saturday</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="schedulePeriod">Period</label>
                                <select id="schedulePeriod" required>
                                    <option value="">Select Period</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleSubject">Subject</label>
                                <select id="scheduleSubject" required>
                                    <option value="">Select Subject</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleTeacher">Teacher</label>
                                <select id="scheduleTeacher" required>
                                    <option value="">Select Teacher</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="scheduleTime">Time</label>
                                <input type="time" id="scheduleTime" required>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Schedule</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddScheduleForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="scheduleList">
                    <p>No schedule entries. Add your first schedule!</p>
                </div>
            </div>

            <!-- Exams Section -->
            <div id="exams" class="section">
                <h2>Paper Creation & Exam Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddPaperForm()">Create New Paper</button>
                </div>
                <div class="filters">
                    <input type="text" id="paperSearch" placeholder="Search by title or subject...">
                    <select id="paperClassFilter">
                        <option value="">All Classes</option>
                        <option value="Nursery">Nursery</option>
                        <option value="LKG">LKG</option>
                        <option value="UKG">UKG</option>
                        <option value="1">Class 1</option>
                        <option value="2">Class 2</option>
                        <option value="3">Class 3</option>
                        <option value="4">Class 4</option>
                        <option value="5">Class 5</option>
                        <option value="6">Class 6</option>
                        <option value="7">Class 7</option>
                        <option value="8">Class 8</option>
                        <option value="9">Class 9</option>
                        <option value="10">Class 10</option>
                        <option value="11">Class 11</option>
                        <option value="12">Class 12</option>
                    </select>
                    <select id="paperSubjectFilter">
                        <option value="">All Subjects</option>
                    </select>
                    <select id="paperTypeFilter" style="display: none;">
                        <option value="">All Types</option>
                    </select>
                </div>
                <div class="form-container" id="addPaperFormContainer" style="display: none;">
                    <form id="paperForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paperTitle">Paper Title</label>
                                <input type="text" id="paperTitle" name="paper_title" required>
                            </div>
                            <div class="form-group">
                                <label for="paperClass">Class</label>
                                <select id="paperClass" name="paper_class" required onchange="schoolSystem.loadSubjectsForPaper()">
                                    <option value="">Select Class</option>
                                    <option value="Nursery">Nursery</option>
                                    <option value="LKG">LKG</option>
                                    <option value="UKG">UKG</option>
                                    <option value="1">Class 1</option>
                                    <option value="2">Class 2</option>
                                    <option value="3">Class 3</option>
                                    <option value="4">Class 4</option>
                                    <option value="5">Class 5</option>
                                    <option value="6">Class 6</option>
                                    <option value="7">Class 7</option>
                                    <option value="8">Class 8</option>
                                    <option value="9">Class 9</option>
                                    <option value="10">Class 10</option>
                                    <option value="11">Class 11</option>
                                    <option value="12">Class 12</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperSubject">Subject</label>
                                <select id="paperSubject" name="paper_subject" required>
                                    <option value="">Select Subject</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Physics">Physics</option>
                                    <option value="Chemistry">Chemistry</option>
                                    <option value="Biology">Biology</option>
                                    <option value="English">English</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="History">History</option>
                                    <option value="Geography">Geography</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Economics">Economics</option>
                                    <option value="Commerce">Commerce</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Environmental Science">Environmental Science</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperType">Paper Type</label>
                                <select id="paperType" name="paper_type" required>
                                    <option value="">Select Paper Type</option>
                                    <option value="Unit Test">Unit Test</option>
                                    <option value="Mid Term">Mid Term Exam</option>
                                    <option value="Final Exam">Final Exam</option>
                                    <option value="Practice Test">Practice Test</option>
                                    <option value="Quiz">Quiz</option>
                                    <option value="Assignment">Assignment</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="paperDuration">Duration (minutes)</label>
                                <input type="number" id="paperDuration" name="paper_duration" min="30" value="60">
                            </div>
                            <div class="form-group">
                                <label for="paperTotalMarks">Total Marks</label>
                                <input type="number" id="paperTotalMarks" name="paper_total_marks" min="1" value="100">
                            </div>
                        </div>

                        <!-- Paper Content Editor -->
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="paperContent">Exam Paper Content</label>
                                <div class="editor-toolbar">
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('bold')"><i class="fas fa-bold"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('italic')"><i class="fas fa-italic"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.formatText('underline')"><i class="fas fa-underline"></i></button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addFormula()">Add Formula</button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addTable()">Add Table</button>
                                    <button type="button" class="btn btn-sm btn-secondary" onclick="schoolSystem.addWatermark()">Add Watermark</button>
                                </div>
                                <textarea id="paperContent" name="paper_content" rows="15" placeholder="Enter your exam paper content here... You can use the toolbar above to format text, add formulas, tables, and watermarks."></textarea>
                            </div>
                        </div>

                        <!-- Question Builder -->
                        <div class="form-row">
                            <div class="form-group">
                                <label>Quick Question Builder</label>
                                <button type="button" class="btn btn-secondary" onclick="schoolSystem.addQuickQuestion()">Add Question</button>
                                <div id="questionsContainer"></div>
                            </div>
                        </div>

                        <!-- Paper Settings -->
                        <div class="form-row">
                            <div class="form-group">
                                <label for="watermarkText">Watermark Text (Optional)</label>
                                <input type="text" id="watermarkText" name="watermark_text" placeholder="e.g., CONFIDENTIAL, DRAFT">
                            </div>
                            <div class="form-group">
                                <label for="instructions">Special Instructions</label>
                                <textarea id="instructions" name="instructions" rows="3" placeholder="Enter any special instructions for students..."></textarea>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Create Paper</button>
                            <button type="button" class="btn btn-success" onclick="schoolSystem.previewPaper()">Preview Paper</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddPaperForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="examsList">
                    <p>No papers created yet. Create your first paper!</p>
                </div>
            </div>

            <!-- Fees Section -->
            <div id="fees" class="section">
                <h2>Fee Management</h2>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="schoolSystem.showAddFeeRecordForm()">Add Fee Record</button>
                </div>
                <div class="filters">
                    <input type="text" id="feeSearch" placeholder="Search by name, roll no, or class...">
                    <select id="feeStatusFilter">
                        <option value="">All Status</option>
                        <option value="pending">Pending</option>
                        <option value="paid">Paid</option>
                        <option value="partial">Partial</option>
                    </select>
                </div>
                <div class="form-container" id="addFeeRecordFormContainer" style="display: none;">
                    <form id="feeRecordForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="feeStudent">Student</label>
                                <select id="feeStudent" name="fee_student" required onchange="schoolSystem.loadStudentFeeHistory()">
                                    <option value="">Select Student</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeMonth">Month</label>
                                <select id="feeMonth" name="fee_month" required>
                                    <option value="">Select Month</option>
                                    <option value="January">January</option>
                                    <option value="February">February</option>
                                    <option value="March">March</option>
                                    <option value="April">April</option>
                                    <option value="May">May</option>
                                    <option value="June">June</option>
                                    <option value="July">July</option>
                                    <option value="August">August</option>
                                    <option value="September">September</option>
                                    <option value="October">October</option>
                                    <option value="November">November</option>
                                    <option value="December">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeYear">Year</label>
                                <select id="feeYear" name="fee_year" required>
                                    <option value="">Select Year</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feeAmount">Monthly Fee Amount</label>
                                <input type="number" id="feeAmount" name="fee_amount" min="0" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="feePaid">Amount Paid</label>
                                <input type="number" id="feePaid" name="fee_paid" min="0" step="0.01" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="paymentDate">Payment Date</label>
                                <input type="date" id="paymentDate" name="payment_date" required>
                            </div>
                            <div class="form-group">
                                <label for="paymentMethod">Payment Method</label>
                                <select id="paymentMethod" name="payment_method" required>
                                    <option value="">Select Method</option>
                                    <option value="Cash">Cash</option>
                                    <option value="Online Transfer">Online Transfer</option>
                                    <option value="Cheque">Cheque</option>
                                    <option value="Card">Card</option>
                                    <option value="UPI">UPI</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lateFee">Late Fee (if any)</label>
                                <input type="number" id="lateFee" name="late_fee" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="discount">Discount (if any)</label>
                                <input type="number" id="discount" name="discount" min="0" step="0.01" value="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label for="feeNotes">Notes/Remarks</label>
                                <textarea id="feeNotes" name="fee_notes" rows="2" placeholder="Any additional notes about this payment..."></textarea>
                            </div>
                        </div>

                        <!-- Student Fee History -->
                        <div class="fee-history" id="studentFeeHistory" style="display: none;">
                            <h4>Fee Payment History</h4>
                            <div id="feeHistoryList">
                                <p>No fee history found for this student</p>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Add Fee Record</button>
                            <button type="button" class="btn btn-secondary" onclick="schoolSystem.hideAddFeeRecordForm()">Cancel</button>
                        </div>
                    </form>
                </div>
                <div id="feesList">
                    <p>No fee records found.</p>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="schoolSystem.downloadFeesReport()">Download Report</button>
                </div>
            </div>

            <!-- Salary Section -->
            <div id="salary" class="section">
                <h2>Salary Management</h2>
                <div class="salary-actions">
                    <input type="file" id="excelUpload" accept=".xlsx,.xls" style="display: none;">
                    <button class="btn btn-primary" onclick="document.getElementById('excelUpload').click()">Upload Excel</button>
                </div>
                <div id="salaryList">
                    <p>Loading salaries...</p>
                </div>
                <div id="salaryFormContainer">
                    <form id="salaryForm">
                        <!-- Salary form fields -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Salary</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports" class="section">
                <h2>Reports</h2>
                <div id="reportsList">
                    <p>Loading reports...</p>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="section">
                <h2>Settings</h2>
                <div class="form-container">
                    <form id="schoolInfoForm">
                        <h3>School Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="schoolName">School Name</label>
                                <input type="text" id="schoolName">
                            </div>
                            <div class="form-group">
                                <label for="schoolCode">School Code</label>
                                <input type="text" id="schoolCode">
                            </div>
                            <div class="form-group">
                                <label for="address">Address</label>
                                <textarea id="address"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="phone">Phone</label>
                                <input type="tel" id="phone">
                            </div>
                            <div class="form-group">
                                <label for="email">Email</label>
                                <input type="email" id="email">
                            </div>
                            <div class="form-group">
                                <label for="website">Website</label>
                                <input type="url" id="website">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save School Info</button>
                        </div>
                    </form>

                    <form id="systemPrefsForm">
                        <h3>System Preferences</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="theme">Theme</label>
                                <select id="theme">
                                    <option value="light">Light</option>
                                    <option value="dark">Dark</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="language">Language</label>
                                <select id="language">
                                    <option value="en">English</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="notifications"> Enable Notifications
                                </label>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Preferences</button>
                        </div>
                    </form>

                    <form id="securityForm">
                        <h3>Security Settings</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="sessionTimeout"> Enable Session Timeout
                            </label>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Security Settings</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Edit Modal -->
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <span class="close" onclick="schoolSystem.closeModal()">&times;</span>
                    <h3 id="modalTitle">Edit Item</h3>
                    <form id="editForm">
                        <!-- Dynamic form fields -->
                    </form>
                </div>
            </div>
        </main>
    </div>
    <script src="script.js"></script>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('loggedIn');
            window.location.href = 'login.html';
        });
    </script>
</body>
</html>
